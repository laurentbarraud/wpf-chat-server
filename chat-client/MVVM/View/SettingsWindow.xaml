<Window x:Class="chat_client.MVVM.View.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings"
        Height="268" Width="426"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource BackgroundBrush}" Loaded="Window_Loaded">

    <Grid>
        <StackPanel VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,40,0,0">

            <!-- Custom TCP Port Toggle -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,40">
                <Label Content="Use custom TCP port"
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource ForegroundBrush}" TabIndex="4" />

                <ToggleButton x:Name="UseCustomPortToggle"
                              Width="70" Height="34"
                              Margin="10,0"
                              Checked="UseCustomPortToggle_Checked"
                              Unchecked="UseCustomPortToggle_Unchecked" TabIndex="0">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Grid>
                                <Border x:Name="SwitchBackground"
                                        CornerRadius="16"
                                        Background="{DynamicResource BackgroundBrush}"
                                        BorderBrush="{DynamicResource AccentBrush}"
                                        BorderThickness="1" />

                                <Grid x:Name="ThumbContainer"
                                      Width="34" Height="34"
                                      VerticalAlignment="Center"
                                      Margin="2,2,30,2">
                                    <Ellipse Fill="{DynamicResource PrimaryBrush}" />
                                    <Image x:Name="SwitchIcon"
                                           Source="/Resources/port-setting-disabled.png"
                                           Width="18" Height="18"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                                </Grid>
                            </Grid>

                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="SwitchIcon" Property="Source" Value="/Resources/port-setting.png" />
                                    <Setter TargetName="ThumbContainer" Property="Margin" Value="30,2,2,2" />
                                    <Setter TargetName="SwitchBackground" Property="Background" Value="{DynamicResource AccentBrush}" />
                                </Trigger>
                                <Trigger Property="IsChecked" Value="False">
                                    <Setter TargetName="SwitchIcon" Property="Source" Value="/Resources/port-setting-disabled.png" />
                                    <Setter TargetName="ThumbContainer" Property="Margin" Value="2,2,30,2" />
                                    <Setter TargetName="SwitchBackground" Property="Background" Value="{DynamicResource BackgroundBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>

                <Grid Width="110" Height="28" VerticalAlignment="Center">
                    <TextBox x:Name="txtCustomPort"
                                 Width="80" Height="20"
                                 HorizontalAlignment="Left"
                                 TextChanged="txtCustomPort_TextChanged"
                                 HorizontalContentAlignment="Center"
                                 ToolTip="Enter a port between 1000 and 65535" IsEnabled="False" TabIndex="1" />

                    <Image x:Name="imgPortStatus"
                           Width="18" Height="18"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Visibility="Collapsed" />
                </Grid>
            </StackPanel>

            <!-- Reduce to Tray Toggle -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Label Content="Reduce in system tray"
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource ForegroundBrush}" TabIndex="5" />

                <ToggleButton x:Name="ReduceInTrayToggle"
                              Width="70" Height="34"
                              Margin="10,0"
                              Checked="ReduceInTrayToggle_Checked"
                              Unchecked="ReduceInTrayToggle_Unchecked" TabIndex="2">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Grid>
                                <Border x:Name="SwitchBackground"
                                        CornerRadius="16"
                                        Background="{DynamicResource BackgroundBrush}"
                                        BorderBrush="{DynamicResource AccentBrush}"
                                        BorderThickness="1" />

                                <Grid x:Name="ThumbContainer"
                                      Width="34" Height="34"
                                      VerticalAlignment="Center"
                                      Margin="2,2,30,2">
                                    <Ellipse Fill="{DynamicResource PrimaryBrush}" />
                                    <Image x:Name="SwitchIcon"
                                           Source="/Resources/reduce-to-tray-disabled.png"
                                           Width="18" Height="18"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                                </Grid>
                            </Grid>

                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="SwitchIcon" Property="Source" Value="/Resources/reduce-to-tray-calc-icon.png" />
                                    <Setter TargetName="ThumbContainer" Property="Margin" Value="30,2,2,2" />
                                    <Setter TargetName="SwitchBackground" Property="Background" Value="{DynamicResource AccentBrush}" />
                                </Trigger>
                                <Trigger Property="IsChecked" Value="False">
                                    <Setter TargetName="SwitchIcon" Property="Source" Value="/Resources/reduce-to-tray-disabled.png" />
                                    <Setter TargetName="ThumbContainer" Property="Margin" Value="2,2,30,2" />
                                    <Setter TargetName="SwitchBackground" Property="Background" Value="{DynamicResource BackgroundBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>
            </StackPanel>
        </StackPanel>

        <!-- About Label -->
        <Label Content="About WPF Chat Server"
               HorizontalAlignment="Center"
               VerticalAlignment="Top"
               Margin="0,203,0,0"
               Foreground="{DynamicResource ForegroundBrush}"
               Cursor="Hand"
               MouseDown="AboutLabel_MouseDown" TabIndex="3" />
    </Grid>
</Window>
